<MainScreen>:
	speed_slider: spd_slider
	connect_button: con_button
	ping_label: ping_lbl
	camera_box: camera_image
	mode_button: mode_btn

    canvas.before:
        Color:
            rgb: 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size
			source: 'images/background.png'

	BoxLayout:
		orientation: 'vertical'
		RelativeLayout:
			size_hint: 1, 0.13

			AnchorLayout:
				padding: 10
				anchor_x: 'left'
				anchor_y: 'top'
				Button:
					id: mode_btn
					canvas:
						Color:
							rgba: 1,1,1,1
						Line:
							rectangle: self.x, self.y, self.width, self.height
					background_color: 0,0,0,0
					text: 'Mode'
					on_release: root.mode_button_click()
					size_hint: .17, .65

			AnchorLayout:
				anchor_x: 'center'
				anchor_y: 'center'
				Button:
					id: con_button
					background_color: 0, 1, 0, 1
					text:'CONNECT'
					size_hint: .25, .75
					on_release: root.connect()

			AnchorLayout:
				anchor_x: 'right'
				anchor_y: 'top'
				Label:
					id: ping_lbl
					size_hint: .07, .26

		BoxLayout:
			orientation: 'horizontal'
			size_hint_y: 0.74
			BoxLayout:
				orientation: 'vertical'
				size_hint_x: 0.054

			BoxLayout:
				orientation: 'vertical'
				size_hint_x: 0.324

				BoxLayout:
					orientation: 'horizontal'
					Button:
						background_color: (0,0,0,0)
					Button:
						on_press: root.button_forward()
						on_release: root.stop()
						background_color: (0,0,0,0)
						Image:
							source: "images/arrow_up.png"
							center_x: self.parent.center_x
							center_y: self.parent.center_y
					Button:
						background_color: (0,0,0,0)

				BoxLayout:
					orientation: 'horizontal'
					Button:
						background_color: (0,0,0,0)
						on_press: root.button_left()
						on_release: root.stop()
						Image:
							source: "images/arrow_left.png"
							center_x: self.parent.center_x
							center_y: self.parent.center_y
					Button:
						background_color: (0,0,0,0)
						Image:
							source: "images/stop.png"
							center_x: self.parent.center_x
							center_y: self.parent.center_y
					Button:
						background_color: (0,0,0,0)
						on_press: root.button_right()
						on_release: root.stop()
						Image:
							source: "images/arrow_right.png"
							center_x: self.parent.center_x
							center_y: self.parent.center_y

				BoxLayout:
					orientation: 'horizontal'
					Button:
						background_color: (0,0,0,0)
					Button:
						background_color: (0,0,0,0)
						on_press: root.button_back()
						on_release: root.stop()
						Image:	
							source: "images/arrow_down.png"
							center_x: self.parent.center_x
							center_y: self.parent.center_y
					Button:
						background_color: (0,0,0,0)

			BoxLayout:
				orientation: 'vertical'
				size_hint_x: 0.135
				Slider:
					id: spd_slider
					#on_touch_up: root.set_veliocity(self.value)
					orientation: 'vertical'
					min: 0
					max: 100

			BoxLayout:
				orientation: 'vertical'
				size_hint_x: 0.405
				AnchorLayout:
					anchor_x: 'center'
					anchor_y: 'center'
					Image:
						id: camera_image
						allow_stretch: True
						keep_ratio: True
						size_hint_y: None
						size_hint_x: None
						width: self.parent.width
						height: self.parent.width/self.image_ratio

			BoxLayout:
				orientation: 'vertical'
				size_hint_x: 0.082

		RelativeLayout:
			size_hint_y: 0.13
			AnchorLayout:
				anchor_x: 'left'
				anchor_y: 'bottom'
				Button:
					on_release: root.settings()
					size_hint: 0.05, 0.75
					background_color: (0,0,0,0)
					Image:
						source: "images/settings.png"
						center_x: self.parent.center_x
						center_y: self.parent.center_y

<SecondScreen>:
	textinput_ip: text_input_ip
	textinput_tcp: text_input_tcp
	textinput_camera: text_input_cam
	slider_motor_left: slider_m_left
	slider_motor_right: slider_m_right

    canvas.before:
        Color:
            rgb: 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size
			source: 'images/background.png'

	AnchorLayout:
		anchor_x: 'left'
		anchor_y: 'top'
		Button:
			on_release: root.control()
			size_hint: 0.07, 0.10
			background_color: (1,1,1,0)
			Image:
				source: "images/back.png"
				center_x: self.parent.center_x
				center_y: self.parent.center_y
	BoxLayout:
		orientation: 'horizontal'
		
		BoxLayout:
			size_hint_x: 0.2
			orientation: 'vertical'

		BoxLayout:
			orientation: 'vertical' 
			size_hint_x: 0.6

			Label:
				size_hint_y: 0.1

			Label:
				size_hint_y: 0.1
				text: 'IP Address:'
				font_size: '26sp'

			AnchorLayout:
				anchor_x: 'center'
				size_hint_y: 0.06
				TextInput:
					id: text_input_ip
					text: '192.168.0.1'
					font_size: '22sp'
					size_hint_x: 0.75

			Label:
				size_hint_y: 0.15					

			Label:
				size_hint_y: 0.1
				text: 'TCP/IP Port:'
				font_size: '26sp'
				
			AnchorLayout:
				anchor_x: 'center'
				size_hint_y: 0.06
				TextInput:
					id: text_input_tcp
					text: '5005'
					font_size: '22sp'
					size_hint_x: 0.75
					center_x: self.parent.center_x
					center_y: self.parent.center_y

			Label:
				size_hint_y: 0.15

			Label:
				size_hint_y: 0.1
				text: 'Camera Port:'
				font_size: '26sp'

			AnchorLayout:
				anchor_x: 'center'
				size_hint_y: 0.06
				TextInput:
					id: text_input_cam
					text: '8081'
					font_size: '22sp'
					size_hint_x: 0.75
					center_x: self.parent.center_x
					center_y: self.parent.center_y

			Label:
				size_hint_y: 0.12

		BoxLayout:
			size_hint_x: 0.3
			orientation: 'vertical' 
			Label:
				size_hint_y: 0.15
				text: 'Motor calibration'
				font_size: '36sp'
			BoxLayout:
				size_hint_y: 0.80
				orientation: 'horizontal'
				Slider:
					id: slider_m_left
					on_touch_up: root.left_slider(self.value)
					orientation: 'vertical'
					min: 0
					max: 100

				Slider:
					id: slider_m_right
					on_touch_up: root.right_slider(self.value)
					orientation: 'vertical'
					min: 0
					max: 100
			Label:
				size_hint_y: 0.05

<Error_pop>:
	error_text: err_text
	size_hint: (0.4, 0.6)
	title: "Error"
	BoxLayout:
		orientation: 'vertical'
		Label:
			size_hint_y: 0.7
			id: err_text
			font_size: '32sp'
		Button:
			size_hint_y: 0.3
			text: 'Cancel'
			font_size: '26sp'
			on_release: root.dismiss()

<Manager>:
    id: screen_manager

    screen_main: screen_main
    screen_second: screen_second

    MainScreen:
        id: screen_main
        name: "screen_main"
        manager: screen_manager

    SecondScreen:
        id: screen_second
        name: "screen_second"
        manager: screen_manager